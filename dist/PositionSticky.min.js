!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+o)},o);return t=i+o,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var PositionSticky={POS_SCHEME_STATIC:100,POS_SCHEME_FIXED:200,POS_SCHEME_ABSOLUTE:300,create:function(t,e){return"undefined"==typeof e&&(e={}),Object.create(PositionSticky).init(t,e)},init:function(t,e){return this.constructor=PositionSticky,this.window=window,this.element=t,this.container=t.parentNode,this.posScheme=null,this.isTicking=!1,this.threshold=null,this.options=e,this.latestKnownScrollY=this.window.scrollY,this.validateContainerPosScheme(),this.setOffsetTop(),this.setOffsetBottom(),this.calcThreshold(),this.createPlaceholder(),this.subscribeToWindowScroll(),this},validateContainerPosScheme:function(){var t=this.container.style.getPropertyValue("position");"relative"!=t&&"absolute"!=t&&this.container.style.setProperty("position","relative")},setOffsetTop:function(){if("number"==typeof this.options.offsetTop&&this.options.offsetTop>=0)this.offsetTop=this.options.offsetTop;else{var t=parseInt(this.window.getComputedStyle(this.container).getPropertyValue("border-top-width"),10),e=parseInt(this.window.getComputedStyle(this.container).getPropertyValue("padding-top"),10);this.offsetTop=t+e}},setOffsetBottom:function(){var t=parseInt(this.window.getComputedStyle(this.container).getPropertyValue("border-bottom-width"),10),e=parseInt(this.window.getComputedStyle(this.container).getPropertyValue("padding-bottom"),10);this.offsetBottom=t+e},calcThreshold:function(){this.threshold=this.getElementDistanceFromDocumentTop()-this.offsetTop},createPlaceholder:function(){var t=document.createElement("DIV"),e=this.element.getBoundingClientRect().width+"px",i=this.element.getBoundingClientRect().height+"px";t.style.setProperty("display","none"),t.style.setProperty("width",e),t.style.setProperty("height",i),this.element.style.setProperty("width",e),this.container.insertBefore(t,this.element),this.placeholder=t},subscribeToWindowScroll:function(){this.window.addEventListener("scroll",this.onScroll.bind(this))},onScroll:function(){this.isTicking||(this.latestKnownScrollY=this.window.scrollY,this.window.requestAnimationFrame(this.update.bind(this)),this.isTicking=!0)},isStatic:function(){return this.posScheme===PositionSticky.POS_SCHEME_STATIC},makeStatic:function(){this.element.style.setProperty("position","static"),this.placeholder.style.setProperty("display","none"),this.posScheme=PositionSticky.POS_SCHEME_STATIC},isFixed:function(){return this.posScheme===PositionSticky.POS_SCHEME_FIXED},makeFixed:function(){this.element.style.removeProperty("bottom"),this.element.style.setProperty("position","fixed"),this.element.style.setProperty("top",this.offsetTop+"px"),this.placeholder.style.setProperty("display","block"),this.posScheme=PositionSticky.POS_SCHEME_FIXED},isAbsolute:function(){return this.posScheme===PositionSticky.POS_SCHEME_ABSOLUTE},makeAbsolute:function(){this.element.style.removeProperty("top"),this.element.style.setProperty("position","absolute"),this.element.style.setProperty("bottom",this.offsetBottom+"px"),this.placeholder.style.setProperty("display","block"),this.posScheme=PositionSticky.POS_SCHEME_ABSOLUTE},update:function(){this.isTicking=!1,this.isBelowThreshold()?this.isStatic()||this.makeStatic():this.canStickyFitInContainer()?this.isFixed()||this.makeFixed():this.isAbsolute()||this.makeAbsolute()},isBelowThreshold:function(){return this.latestKnownScrollY<this.threshold?!0:!1},canStickyFitInContainer:function(){return this.getAvailableSpaceInContainer()>=this.element.getBoundingClientRect().height},getAvailableSpaceInContainer:function(){return this.container.getBoundingClientRect().bottom-this.offsetBottom-this.offsetTop},getElementDistanceFromDocumentTop:function(){if(0===this.latestKnownScrollY)return this.element.getBoundingClientRect().top;var t=0,e=this.element;do t+=e.offsetTop;while(e=e.offsetParent);return t}};